<%- include('../partials/header') %>
<h2>Gestionar Torneos</h2>
<nav class="admin-subnav">
  <a href="/admin/dashboard" class="subnav-link">← Volver al Panel</a>
</nav>

<form method="post" action="/admin/tournaments">
  <input name="name" placeholder="Nombre del torneo" required />
  <button type="submit">Crear Torneo</button>
</form>

<ul>
  <% tournaments.forEach(t => { %>
    <li>
      <strong><%= t.name %></strong> — Visible: <%= t.visible ? 'Sí' : 'No' %> — Creado: <%= t.created_at ? new Date(t.created_at).toLocaleDateString('es-AR') : 'N/A' %>
      <a href="/admin/tournaments/<%= t.id %>/rules">Editar Reglas</a>
      <form method="post" action="/admin/tournaments/<%= t.id %>/toggle" style="display:inline;">
        <button type="submit"><%= t.visible ? 'Ocultar' : 'Mostrar' %></button>
      </form>
      <form method="post" action="/admin/tournaments/<%= t.id %>/delete" style="display:inline;" onsubmit="return confirm('¿Eliminar torneo y todos sus datos?')">
        <button type="submit">Eliminar</button>
      </form>
    </li>
  <% }) %>
</ul>

<%- include('../partials/footer') %></content>
<parameter name="filePath">/Users/diego/Documents/Development/Nuevo Torneo Futbol/views/admin/tournaments.ejs